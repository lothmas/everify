function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof module&&module.exports?require("jquery"):jQuery)}(function(e,t,o,c){"use strict";function n(t,o){function c(e){var t=s.findCountryByPhoneCode(s,e);s._ccPicker.html(s.createCountryListItem(t.code,t.phoneCode)),s._ccDialCodeTrackerField.val(t.phoneCode),s._ccSelectedCountry={code:t.code,phoneCode:t.phoneCode}}function n(e){var t=s.findCountryByCountryCode(s,e);s._ccPicker.html(s.createCountryListItem(t.code,t.phoneCode)),s._ccDialCodeTrackerField.val(t.phoneCode),s._ccSelectedCountry={code:t.code,phoneCode:t.phoneCode}}var s=this;return this.element=t,this.options=e.extend({},r,o),this._defaults=r,this._name=i,this._list={},this._ccData={},this._ccPicker={},this._ccDialCodeTrackerField={},this._ccSelectedCountry={},this.init(),{setCountryByPhoneCode:c,setCountryByCode:n}}var i="ccPicker",r={countryCode:"LT",dialCodeFieldName:"phoneCode",dataUrl:"data.json"};e.extend(n.prototype,{init:function(){var t=this;this.loadCountryData(t);var o=this.findCountryByCountryCode(t,this.options.countryCode);this._ccPicker=e('<div class="cc-picker cc-picker-code-select-enabled">').insertBefore(this.element),this._ccDialCodeTrackerField=e("<input>").attr({type:"hidden",id:this.element.id+"_"+this.options.dialCodeFieldName,name:this.element.name+"_"+this.options.dialCodeFieldName,value:o.phoneCode}).insertAfter(this.element),this._ccPicker.prepend(this.createCountryListItem(this.options.countryCode.toLowerCase(),o.phoneCode)),this._ccSelectedCountry={code:this.options.countryCode.toLowerCase(),phoneCode:o.phoneCode},this._ccPicker.on("click",function(){e.isEmptyObject(t._list)?t.createCountryList(t):t.destroyCountryList(t)})},loadCountryData:function(t){e.ajax({dataType:"json",url:t.options.dataUrl,type:"get",async:!1,success:function(e){t._ccData=e}})},findCountryByPhoneCode:function(t,o){return e.grep(t._ccData,function(e){return e.phoneCode.toUpperCase()===o.toUpperCase()})[0]},findCountryByCountryCode:function(t,o){return e.grep(t._ccData,function(e){return e.code.toUpperCase()===o.toUpperCase()})[0]},createCountryList:function(t){var o="auto"===t._ccPicker.css("z-index")?0:Number(t._ccPicker.css("z-index"))+10;t._list=e("<ul/>",{"class":"cc-picker-code-list"}).appendTo("body"),t._list.css({top:t._ccPicker.offset().top+t._ccPicker.outerHeight(),left:t._ccPicker.offset().left,"z-index":o}),e.each(t._ccData,function(o,c){var n=e("<li>",{text:c.countryName}).appendTo(t._list);e(n).data("countryItem",c),e(n).prepend(t.createCountryListItem(c.code,c.phoneCode)),e(n).on("click",function(){t.selectCountry(t,e(this)),t.destroyCountryList(t)}),c.phoneCode===t._ccSelectedCountry.phoneCode&&e(n).addClass("cc-picker-selected-country")})},destroyCountryList:function(e){e._list.remove(),e._list={}},selectCountry:function(t,o){var c=e(o).data("countryItem");this._ccSelectedCountry=c,t._ccPicker.html(t.createCountryListItem(c.code,c.phoneCode)),t._ccDialCodeTrackerField.val(c.phoneCode)},createCountryListItem:function(e,t){return'<div class="cc-picker-flag '+e.toLowerCase()+'"></div><span class="cc-picker-code">'+t+"</span> "}}),e.fn.CcPicker=function(t){if("string"==typeof arguments[0]){var o,r=arguments[0],s=Array.prototype.slice.call(arguments,1);return this.each(function(){if(!e.data(this,"plugin_"+i)||"function"!=typeof e.data(this,"plugin_"+i)[r])throw new Error("Method "+r+" does not exist on jQuery."+i);o=e.data(this,"plugin_"+i)[r].apply(this,s)}),o!==c?o:this}return"object"!=typeof t&&t?void 0:this.each(function(){e.data(this,"plugin_"+i)||e.data(this,"plugin_"+i,new n(this,t))})}});